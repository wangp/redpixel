<!doctype linuxdoc system>

<!-- Okay, so SGML/LinuxDoc is overkill for Red Pixel.
     But I wanted to learn it, so there. 
     Hey jed!  This is -*- SGML -*- -->

<article>

<!-- Title information -->

<title>Red Pixel: The Manual
<author>Peter Wang, <tt/tjaden@psynet.net/
<date>Second edition for Red Pixel v0.11, May 2000
<!-- First edition for Red Pixel v0.9, August 1999 -->
<abstract>
This document is a brief manual for the game <bf/Red Pixel/, adapted from
the original <tt/redpixel.txt/.
</abstract>

<!-- Table of contents -->
<toc>

<!-- Begin the document -->

<sect>Preliminary stuff

<sect1>Disclaimer

<p><verb>
#include <std_disclaimer.h>

   "I do not accept responsibility for any effects, adverse or otherwise, 
    that this code may have on you, your computer, your sanity, your dog, 
    and anything else that you can think of. Use it at your own risk."
</verb>

<sect1>System Requirements

<p><itemize>
<item>two Pentium class machines
<item>DOS or Linux (Intel only, I think)
<item>serial cable
<item>VGA-compliant card and monitor
<item>8MB RAM
<item>mouse
<item>tolerance for gore
<item>headphones recommended
</itemize>

<sect1>What's new in this version

<p>New in 0.11:

<itemize>
<item>Linux port, and maps, by Peter Sundling (kaffepeter@telia.com)
<item>faster weapon stats
<item>three maps by Mike (see maps/authors.txt)
<item>mouse wheel support (Linux only)
<item>keyboard control in menu
<item><ref id="sec-demo" name="demo"> recording and playback 
</itemize>

<p>New in 0.9:

<itemize>
<item>a <em/lot/ more blood and sparks, and better particle generation
<item>added <bf><ref id="sec-items" name="scanner"></bf> powerup
<item>added new death sequence (fountain)
<item>added cool backdrop for frag count
<item>added <bf/<ref id="sec-cmdline" name="--lcd">/ option
<item>right mouse button now drops mine
<item>Q/E and R/Y now select next/prev weapons
<item>tweaked stats (see below)
<item>configurable stats system
<item>minor aesthetic and code-wise fixes
<item>four new maps (castle, dome, sniper, mario)
<item>changed licence to LGPL
<item>this manual
</itemize>

The biggest change version 0.9 (gameplay-wise) is the new stats for
items.  This was designed to make frags easier, and to make the game
more fun.  If you don't like the new style, note that you can get
(almost) the same stats as in older versions with  
<bf><tt>red -s stats.07</tt></bf>.  See section 
<ref id="sec-stats" name="Stats"> for more information.

<sect1>Installing

<p>If you are playing under DOS using the binary distribution, you can
skip this section.

You will need to firstly install Allegro (WIP 3.9.x or above), and either
djgpp or gcc.  Then you should be able to simply type ``make'' in the
game's root directory.

Under Linux console you will need to run the binary with root permissions.
See `readme.lnx' in the Allegro distribution for more information.

<!-- Next Section: The Game -->

<sect>The Game

<sect1>Concept

<p>The concept is a platform deathmatch game.  You run around a tile-based map,
picking up various items and shooting your opponent.  Original.

<sect1>Story

<p>(ahem)

You have been thrown in a dungeon with a handful of other
prisoners. Contained within the dungeon are various magical objects,
mostly weapons, which respawn after a certain time period.

Surrounded by such weapons of destruction, you cannot resist the
temptation to kill everyone around you.

<sect1>Starting the game<label id="sec-starting">

<p>Simply run the executable <bf/red.exe/ (<bf/redpixel/ under Linux) to start.
Please note the following command-line options are <em/case-sensitive/:

<descrip><label id="sec-cmdline">
<tag/-e/ Start semi-built-in <ref id="sec-mapeditor" name="map editor">.
<tag/-l/ Use bright (ugly) version of mouse cursor.  Designed 
to be used on hard to see laptop displays.
<tag/-s/ Use alternative <ref id="sec-stats" name="stats"> for items.
<tag/-1, -2, -3, -4/ Use COMx for serial communications.  Default is COM2.
<tag/-q/ Skip introduction (quick!).
<tag/-v/ Display version number.
<tag/-d/ Enable <ref id="sec-demo" name="demo"> recording.
</descrip>

You can collate the options together, e.g. <tt>red -1ql</tt>.

Linux users: COM1 = /dev/ttyS0; COM2 = /dev/ttyS1; etc.

<sect1>Serial connection details 

<p>
Link two computers via a serial cable in COM 1-4 (see Command line
options in section <ref id="sec-starting" name="Starting the game">).  
Select `Start' --> `Serial'.  Enter your name, then wait for
the computers to connect.  If it hangs for some reason, press
`Ctrl-Alt-End' and try again.

If it says `Error opening COM port', check to make
sure you used the right <tt/--comX/ option.  If you're are
running Windows 9x, try running under pure DOS.  If you have a
Logitech mouse you could also also try what I did, and get updated
mouse drivers (MouseWare) for it from their web site.

From here on, you will be shown a map selection screen.  Only the maps
existing on both computers will be displayed.  Please make sure the maps
are identical, otherwise your games will be unsynchronised. Press the up
and down arrow keys to select a map.  You may also have a conversation of
here if you wish.  Feel free to use any obscene words you desire.

(Note: The chat box was designed in case the game ever supported
Internet play.  However it may be also useful in other areas, 
e.g. library)

When you are ready to play, press <bf/F10/.

If your game become unsynchronised, quit the level and restart.
If it ever says <em/SYNC PROBLEM/, then you'd better restart 
from the serial connection procedure.

<sect1>Controls

<p>
<itemize>
<item>Use the following keys to move around.  They are all equivalent.
<tscreen><verb>
        W		T			Up
    A - S - D       F - G - H		Left - Down - Right
</verb></tscreen>
<item>Aim the gun with the mouse, fire with the <em/left mouse button/.
<item>Select the weapon with the <em/number keys/, and with
<em/Q, E, R, Y/.  The weapons you have collected will be displayed on the
left.  Press <em/Enter/ or press the <em/right mouse button/ to lay a
mine.
<item>If you have one and you are running under Linux, you can switch weapons
using a mouse wheel on an Intellimouse-compatible mouse.  Please read
`readme.lnx' in the Allegro distribution to see how to set this up.
<item><em/TAB/ to see your scores.  <em/ESC/ to quit.
<item><em/F12/ to see the frame rate counter.  This is a development
feature, so it's not supposed to work properly.  Just push it quickly
and see.
</itemize>

<sect1>Items<label id="sec-items">

<p>
<itemize>
<item>Weapons
<itemize>
<item>Knife
<item>Pistol
<item>Shotgun
<item>Uzi
<item>M16 (just a big gun, nothing like an M16)
<item>Minigun
<item>Bow with explosive arrows
<item>Bazooka
<item>Mines
</itemize>
<item>Other items:
<itemize>
<item>Chicken (+health)
<item>Coke (+health)
<item>Armour.  Takes half the damage from an attack (1 health = 2 armour)
<item>Goggles.  Lights up your vision, for about a minute.
<item>Backpack.  You drop half of all your ammo when you die, but your guns disappear.
<item>Bloodlust.  Double damage for all weapons, except mines.  Be careful!
<item>Scanner.  Points in the direction of your enemy.
</itemize>
</itemize>

<sect1>Stats<label id="sec-stats">

<p>
Included with the game are three files <tt/stats/, <tt/stats.07/
<tt/stats.fst/.
<tt/stats/ is the more up to date version, providing more powerful
weapons with quicker reload and respawn rates.  <tt/stats.07/
contains the older values, kept only for historic reasons.  <tt/stats.fst/
contains values that will quickly increase the body count.

You can create your own stats by copying one of them, and editing
them with a text editor, then use it with 
<tscreen><code>
&gt; red --stats mystats
</code></tscreen>  
Note that both machines will need <bf/exactly/ the same file, and both
must run with the <tt/-s/ command-line option.  You have been warned.

<sect1>Demos<label id="sec-demo">

<p>You can record your deathmatches into demo files.  To do this, first
start Red Pixel using the <tt>-d</tt> command-line option.

When you start a new game, it will automatically save a demo into the
current directory, named <tt>demoXXXX.rec</tt>, or if that is unwritable
into your home directory (if you don't know what I'm talking about, don't
worry).

To play a demo, simply choose the ``Play Demo'' menu item under ``Start''.

Special keys available only in demo playback mode:

<itemize>
<item>Enter - switch which player camera focuses on
<item>S - hold this down for slow motion mode
</itemize>

Please note that if you exit a demo before its completion, it will display
the frag count <em>as of the time you quit.</em>

<sect1>Tips

<p><itemize>
<item>Use the 3D sound to find where your opponent is.  Also, eating food 
does not make a noise, but picking up things does.
<item>After you pick up an item, place a mine there.  Works also for
regenerating walls (will not flash).
<item>The scanner is good for running away, as well as tracking down.
<item>If are being mowed down with a minigun, run and drop mines!  The
blood will conceal it :)
<item>Jump over your enemy and lay mines.
<item>Jump up ladders, never climb.
</itemize>


<!-- Next Section: The Map Editor -->

<sect>The Map Editor<label id="sec-mapeditor">

<sect1>Map editor keys

<p>After starting the map editor with <tt/red --edit/ you will be
presented with a blank screen.  On the bottom there is a <bf/palette/
and on the top there is a description of the current map, showing the
top-left map coordinates and size.

<itemize>
<item>arrow keys to pan around
<item>1, 2, 3 to change editing modes (tiles, items, starting
locations)
<item>I, J, K, L to change map size
<item>Ctrl-N to clear
<item>Ctrl-S to save
<item>Ctrl-L to load
<item>Ctrl-Q to quit (<em/warning/: does not prompt!)
</itemize>

Select an item or tile with the left mouse button, place it on the map
with the LMB.  Right mouse button clears.  

There is a set maximum of 24 starting locations on a single map.  These
appear as white flags (edit mode 3).

<sect1>Custom maps

<p>If you wish to play your custom maps, make sure that you have
exactly the same file on both machines!  And make sure you send
them to me so I can put them up on my web page.

<!-- Next Section: History -->

<sect>Game history

<p>
August 1999:

I originally thought of the idea for this game about half a year before I
developed it (Jan 1999).  At the time I was trying to write a top-down
shooter called `Raid II' (dropped about 5 times!) so I delayed it, while
my brother worked on the tiny little sprites.

The development (starting June that year) took three months.  The
basic engine was working in a week, the rest of the time was used getting
the serial connection to go, and to tweak things a little.  It has been
a year since.

Yesterday I fixed some really annoying bugs (see log.txt), and tweaked
the stats to increase the frag counts.  Now I am writing this SGML
manual to learn SGML.  It has been a successful project.

But the code sucks. :-)

<sect1>Known ``Bugs''

<p>... that I will never fix.

<itemize>
<item>the blood particles drip through the walls.  This is too cool to fix!
<item>the guy sometimes gets stuck <em/inside/ a wall.  This is a
problem with the way the engine was designed.  I am not going to walk
around the problem with a bunch of if's.
<item>a ladder directly below a tile will allow the guy to pop up into the
tile
<item>pickups are hard-coded into engine
</itemize>

<sect1>To do

<p>Here are some things that I have not bothered to finish.

<itemize>
<item>clean up and modularise the code 
<item>proper networking (client-server, packet loss detection, etc.)
<item>use a scripting language
<item>use linked-lists rather than arrays, where appropriate
<item>config file (COM port settings, LCD cursor, etc.)
<item>LAN support (most requested feature, I think)
</itemize>

I am never going to do the networking, because IMO the structure of the
code just cannot handle it.  Anyway, Red Pixel II will support it.  :-)


<!-- Next Section: Licence -->

<sect>Licensing details

<p>Red Pixel is licensed under the <bf/GNU Lesser General Public
License/ which can be viewed in the file <tt/COPYING/ distributed with
source code package or from http://www.gnu.org/.

Brennan Underwood's `fastsqrt' routines (in the src/fastsqrt
directory) do not fall under the LGPL.  (I don't know what
licence it falls under, but it's free software of some sort.)

The slightly modified random number generator <bf/rg_rand.c/ was taken
from the Snippets collection, and remains in the public domain.


<!-- Next Section: Contact -->

<sect>Contacting Psyk Software

<p><tscreen><verb>
Email: tjaden@psynet.net
WWW:   http://www.psynet.net/tjaden/
</verb></tscreen>

</article>
